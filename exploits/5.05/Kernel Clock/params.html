<form class="pb-2">
  <div class="form-inline">
    <div class="col-sm-2">
      <label>Date:</label>
    </div>
    <div class="col-sm-10 text-right">
      <select class="form-control" id="kernel-clock-year">
        <option>2012</option>
        <option>2013</option>
        <option>2014</option>
        <option>2015</option>
        <option>2016</option>
        <option>2017</option>
        <option>2018</option>
        <option>2019</option>
        <option>2020</option>
        <option>2021</option>
        <option>2022</option>
        <option>2023</option>
        <option>2024</option>
        <option>2025</option>
        <option>2026</option>
        <option>2027</option>
        <option>2028</option>
        <option>2029</option>
        <option>2030</option>
        <option>2031</option>
        <option>2032</option>
        <option>2033</option>
        <option>2034</option>
        <option>2036</option>
        <option>2037</option>
        <option>2038</option>
      </select>
      <select class="form-control" id="kernel-clock-month">
        <option value="00">January</option>
        <option value="01">February</option>
        <option value="02">March</option>
        <option value="03">April</option>
        <option value="04">May</option>
        <option value="05">June</option>
        <option value="06">July</option>
        <option value="07">August</option>
        <option value="08">September</option>
        <option value="09">October</option>
        <option value="10">November</option>
        <option value="11">December</option>
      </select>
      <select class="form-control" id="kernel-clock-day">
        <option>01</option>
        <option>02</option>
        <option>03</option>
        <option>04</option>
        <option>05</option>
        <option>06</option>
        <option>07</option>
        <option>08</option>
        <option>09</option>
        <option>10</option>
        <option>11</option>
        <option>12</option>
        <option>13</option>
        <option>14</option>
        <option>15</option>
        <option>16</option>
        <option>17</option>
        <option>18</option>
        <option>19</option>
        <option>20</option>
        <option>21</option>
        <option>22</option>
        <option>23</option>
        <option>24</option>
        <option>25</option>
        <option>26</option>
        <option>27</option>
        <option>28</option>
        <option>29</option>
        <option>30</option>
        <option>31</option>
      </select>
    </div>
  </div>
</form>
<form class="pb-2">
  <div class="form-inline">
    <div class="col-sm-2">
      <label>Time:</label>
    </div>
    <div class="col-sm-10 text-right">
      <select class="form-control" id="kernel-clock-hour">
        <option>00</option>
        <option>01</option>
        <option>02</option>
        <option>03</option>
        <option>04</option>
        <option>05</option>
        <option>06</option>
        <option>07</option>
        <option>08</option>
        <option>09</option>
        <option>10</option>
        <option>11</option>
        <option>12</option>
        <option>13</option>
        <option>14</option>
        <option>15</option>
        <option>16</option>
        <option>17</option>
        <option>18</option>
        <option>19</option>
        <option>20</option>
        <option>21</option>
        <option>22</option>
        <option>23</option>
      </select>
      <select class="form-control" id="kernel-clock-minute">
        <option>00</option>
        <option>01</option>
        <option>02</option>
        <option>03</option>
        <option>04</option>
        <option>05</option>
        <option>06</option>
        <option>07</option>
        <option>08</option>
        <option>09</option>
        <option>10</option>
        <option>11</option>
        <option>12</option>
        <option>13</option>
        <option>14</option>
        <option>15</option>
        <option>16</option>
        <option>17</option>
        <option>18</option>
        <option>19</option>
        <option>20</option>
        <option>21</option>
        <option>22</option>
        <option>23</option>
        <option>24</option>
        <option>25</option>
        <option>26</option>
        <option>27</option>
        <option>28</option>
        <option>29</option>
        <option>30</option>
        <option>31</option>
        <option>32</option>
        <option>33</option>
        <option>34</option>
        <option>35</option>
        <option>36</option>
        <option>37</option>
        <option>38</option>
        <option>39</option>
        <option>40</option>
        <option>41</option>
        <option>42</option>
        <option>43</option>
        <option>44</option>
        <option>45</option>
        <option>46</option>
        <option>47</option>
        <option>48</option>
        <option>49</option>
        <option>50</option>
        <option>51</option>
        <option>52</option>
        <option>53</option>
        <option>54</option>
        <option>55</option>
        <option>56</option>
        <option>57</option>
        <option>58</option>
        <option>59</option>
      </select>
      <select class="form-control" id="kernel-clock-second">
        <option>00</option>
        <option>01</option>
        <option>02</option>
        <option>03</option>
        <option>04</option>
        <option>05</option>
        <option>06</option>
        <option>07</option>
        <option>08</option>
        <option>09</option>
        <option>10</option>
        <option>11</option>
        <option>12</option>
        <option>13</option>
        <option>14</option>
        <option>15</option>
        <option>16</option>
        <option>17</option>
        <option>18</option>
        <option>19</option>
        <option>20</option>
        <option>21</option>
        <option>22</option>
        <option>23</option>
        <option>24</option>
        <option>25</option>
        <option>26</option>
        <option>27</option>
        <option>28</option>
        <option>29</option>
        <option>30</option>
        <option>31</option>
        <option>32</option>
        <option>33</option>
        <option>34</option>
        <option>35</option>
        <option>36</option>
        <option>37</option>
        <option>38</option>
        <option>39</option>
        <option>40</option>
        <option>41</option>
        <option>42</option>
        <option>43</option>
        <option>44</option>
        <option>45</option>
        <option>46</option>
        <option>47</option>
        <option>48</option>
        <option>49</option>
        <option>50</option>
        <option>51</option>
        <option>52</option>
        <option>53</option>
        <option>54</option>
        <option>55</option>
        <option>56</option>
        <option>57</option>
        <option>58</option>
        <option>59</option>
      </select>
    </div>
  </div>
</form>
<div class="text-center">
<button type="button" id="kernel-clock-submit" class="btn btn-primary btn-lg btn-block" data-location="{{EXPLOIT_LOCATION}}">Submit</button>
<hr>
<button type="button" id="kernel-clock-react" class="btn btn-secondary btn-lg btn-block" data-location="{{EXPLOIT_LOCATION}}">ReactPS+</button>
</div>
<script>
  document.getElementById('kernel-clock-react').addEventListener('click', function (event) {
    // {{LOADER}}
    // Value in payload by Zer0xFF is 14861963 or June, 21 2012 01:19:23
    document.getElementById('kernel-clock-year').value = '2012';
    document.getElementById('kernel-clock-month').value = '05';
    document.getElementById('kernel-clock-day').value = '21';
    document.getElementById('kernel-clock-hour').value = '01';
    document.getElementById('kernel-clock-minute').value = '19';
    document.getElementById('kernel-clock-second').value = '23';
    loadFrame(event.target.dataset.location);
    // {{CLOSER}}
  });
  document.getElementById('kernel-clock-submit').addEventListener('click', function (event) {
    // {{LOADER}}
    function zeroFill(number, width) {
      width -= number.toString().length;

      if (width > 0) {
        return new Array(width + (/\./.test(number) ? 2 : 1)).join('0') + number;
      }

      return number + '';
    }

    // May need a fix between here
    var sonyEpoch = new Date(2012, 0, 1, 0, 0, 0);

    var now = new Date(
      document.getElementById('kernel-clock-year').value,
      document.getElementById('kernel-clock-month').value,
      document.getElementById('kernel-clock-day').value,
      document.getElementById('kernel-clock-hour').value,
      document.getElementById('kernel-clock-minute').value,
      document.getElementById('kernel-clock-second').value
    );

    var timeToSet = (now.getTime() - sonyEpoch.getTime()) / 1000;
    // and here...
    timeToSet = 22222222;

    var values = zeroFill(timeToSet.toString(16), 8);

    var i423 = parseInt('0x' + values.slice(2, 8) + 'bf', 16);
    var i424 = parseInt('0x31d3ff' + values.slice(0, 2), 16);

    alert('TTS: ' + timeToSet);
    alert('Params: ' + JSON.stringify({"payloadParams": {"423": i423, "424": i424}}));

    //loadFrame(event.target.dataset.location + '#params=' + JSON.stringify({'payloadParams': {'423': i423, '424': i424}}));
    // {{CLOSER}}
  });
</script>
